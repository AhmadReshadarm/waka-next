/*! For license information please see verify-index.min.js.LICENSE.txt */
!function(){var __webpack_modules__={4046:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _document$querySelect;__webpack_require__(5737),__webpack_require__(58),__webpack_require__(4987),null===(_document$querySelect=document.querySelector("#customerEmail"))||void 0===_document$querySelect||_document$querySelect.value},58:function(module){module.exports={STORE_INFO:{defaultStore:{name:"Global",link:"https://www.wakavaping.com/",code:"gl"},storeList:[{name:"United Kingdom",link:"https://uk.wakavaping.com/",code:"gb"},{name:"Canada",link:"https://ca.wakavaping.com/",code:"ca"},{name:"France",link:"https://fr.wakavaping.com/",code:"fr"},{name:"Spain",link:"https://es.wakavaping.com/",code:"es"},{name:"Russia",link:"https://ru.wakavaping.com/",code:"ru"},{name:"Indonesia",link:"https://idn.wakavaping.com/",code:"id"},{name:"Colombia",link:"https://lat.wakavaping.com/",code:"co"},{name:"Italy",link:"https://it.wakavaping.com/",code:"it"},{name:"New Zealand",link:"https://walavape.com/",code:"nz"}]},STORAGE_KEY:{USER_ID:"RELX_USER_ID"},ANALYZE_TYPE:{CAMPAIGN_LAND_PAGE_UV:0,CAMPAIGN_LAND_PAGE_PV:1,NEW_USER:2,JOIN_GAME_UV:3,JOIN_GAME_TIME:4,WHATS_APP:5}}},3063:function(module){module.exports={emit:function(eventName,data,$el){var customEvent;return"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style?(customEvent=document.createEvent("CustomEvent")).initCustomEvent(eventName,!0,!0,data):customEvent=new window.CustomEvent(eventName,{detail:data,bubbles:!0,cancelable:!0}),($el=$el||document).dispatchEvent(customEvent)},EVENT:{SIGN_IN_REQUIRED:"sign-in-required",NO_AGE_RESTRICTION:"above-age",NO_COUNTRY_JUMP:"country-jump",CHOOSE_STORE_MODAL_HIDE:"choose-store-modal-hide",CHOOSE_STORE_MODAL_POPED:"choose-store-modal-poped",SHOW_SIMPLE_MESSAGE:"message.show",ADD_ITEM_TO_CART:"cart.add",ADD_ITEM_TO_CART_FINISH:"cart.add.finish",UPDATE_CART:"cart.update",SHOW_PROGRESS:"progress.show",HIDE_PROGRESS:"progress.hide",VARIANT_CHANGE:"variant-change"}}},1964:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{getApiVoucher:function(){return getApiVoucher},getSearchParams:function(){return getSearchParams},getStorage:function(){return getStorage},setStorage:function(){return setStorage}});__webpack_require__(3063);var js_cookie__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1955);function getApiVoucher(){var token=js_cookie__WEBPACK_IMPORTED_MODULE_1__.Z.get("relx-voucher");if(token)return token;var args=function(link){var url=link||location.href,firstQMindex=(url=decodeURIComponent(url)).indexOf("?");if(-1===firstQMindex)return{};var residue=url.substr(firstQMindex+1),hashIndex=residue.indexOf("#");hashIndex>-1&&(residue=residue.substr(0,hashIndex));var secondQMindex=residue.indexOf("?"),search={};if(-1===secondQMindex)for(var pairs=residue.split("&"),i=0;i<pairs.length;i++)search[(pieces=pairs[i].split("="))[0]]=pieces[1];else{var pieces,suffix=residue.substr(secondQMindex);for(pairs=residue.substr(0,secondQMindex).split("&"),i=0;i<pairs.length;i++)pieces=pairs[i].split("="),i===pairs.length-1?search[pieces[0]]=pieces[1]+suffix:search[pieces[0]]=pieces[1]}return search}();return args.token?args.token:window.Shopify&&window.Shopify.designMode?getStorage("relx-voucher-design-mode"):void 0}function getSearchParams(){var search=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return search&&"[object String]"==Object.prototype.toString.call(search)?null:new URLSearchParams(window.self.location.search)}function getStorage(key){try{var value=localStorage.getItem(key);return null==value?null:JSON.parse(value)}catch(error){return window.manualCaptureException&&window.manualCaptureException("LOCAL_STORAGE_ERROR",{type:"get",key:key,error:error}),null}}function setStorage(key,value){if(null!=value)try{value=JSON.stringify(value),localStorage.setItem(key,value)}catch(error){return window.manualCaptureException&&window.manualCaptureException("LOCAL_STORAGE_ERROR",{type:"set",key:key,value:value,error:error}),null}}},2095:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{b:function(){return Alert}});function getHtml(content){return'\n        <i class="el-message__icon el-icon-info">\n          <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>\n        </i>\n        <p class="el-message__content">'.concat(content,"</p>\n    ")}function injectStyles(){var StyleTag=document.createElement("STYLE");StyleTag.innerHTML="\n    .el-message {\n        min-width: 380px;\n        box-sizing: border-box;\n        border-radius: 4px;\n        border: 1px solid #ebeef5;\n        position: fixed;\n        left: 50%;\n        top: 20px;\n        transform: translateX(-50%);\n        // background-color: #edf2fc;\n        background: #f0c756;\n        transition: opacity .3s,transform .4s,top .4s;\n        overflow: hidden;\n        padding: 15px 15px 15px 20px;\n        display: flex;\n        align-items: center;\n        z-index: 2040;\n    }\n    .el-message .el-icon-info {\n        color: #fff;\n    }\n    .el-message__icon {\n        margin-right: 10px;\n    }\n    .el-message--info .el-message__content {\n        color: #fff;\n    }\n    .el-message p {\n        margin: 0;\n    }\n    .el-message__content {\n        padding: 0;\n        font-size: 14px;\n        line-height: 1;\n    }\n    @media (max-width: 575.98px) {\n        .el-message{\n            min-width: auto;\n            width:70%;\n            word-break: break-word;\n        }\n    }\n",document.head.appendChild(StyleTag)}var Alert=function(msg){var time=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;injectStyles();var html=getHtml(msg),DIV=document.createElement("DIV");DIV.innerHTML=html,DIV.setAttribute("class","el-message el-message--info as-relx-alert");var len=document.querySelectorAll(".as-relx-alert").length,top=56*len+20+10*len;DIV.style.top=top+"px",document.body.appendChild(DIV),setTimeout((function(){DIV&&DIV.remove()}),time)}},5737:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Vj:function(){return uuid},i3:function(){return relx_ajax}});var _assets_script_events_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3063),_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0__),_assets_script_helpers_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1964),_assets_script_lib_Alert__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2095),_hooks_bindCookie__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4987);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty2(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty2(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function domainHandler(response){if(response&&response.data&&response.data.multiPassUrl&&Shopify&&Shopify.designMode){var origin=location.origin+"/";response.data.multiPassUrl=response.data.multiPassUrl.replace(/((http)|(https):\/\/[^\/]+)\//,origin)}}var api_list=["/user/queryUserInfo"];function relx_ajax(options){return new Promise((function(resolve,reject){options||reject();var $store=document.getElementById("customer-current-store"),$returnToUrl=document.getElementById("customer-return-to-url"),store=$store&&$store.value,returnToUrl=$returnToUrl&&$returnToUrl.value,cookieId=(0,_hooks_bindCookie__WEBPACK_IMPORTED_MODULE_2__.VN)();if(location.search&&location.search.includes("return_to=")){var search=location.search;search.startsWith("?")&&(search=search.slice(1));var target=search.split("&").find((function(item){return item.includes("return_to=")}));target&&(returnToUrl=target.split("=")[1])&&"string"==typeof returnToUrl&&(returnToUrl=decodeURIComponent(returnToUrl))}var xhr=new XMLHttpRequest;if(xhr.withCredentials=options.withCredentials||!1,"GET"===options.method&&(options.url.includes("?")?options.url="".concat(options.url,"&region=").concat(store,"&cookie=").concat(cookieId):options.url="".concat(options.url,"?region=").concat(store,"&cookie=").concat(cookieId)),xhr.open(options.method,options.url,true),xhr.setRequestHeader("Content-Type","application/json"),xhr.setRequestHeader("Accept","application/json, text/javascript, */*"),options.needAuthorization){var voucher=(0,_assets_script_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getApiVoucher)();voucher&&xhr.setRequestHeader("Authorization",voucher)}window.Shopify&&!window.Shopify.designMode&&(xhr.timeout=options.timeout||6e4),xhr.onload=function(){if("function"==typeof options.always&&options.always(),200===xhr.status&&xhr.responseText){var response=JSON.parse(xhr.responseText);if(options.noParse)return options.done(response),void resolve(response);if(200===response.code)"function"==typeof options.done&&(domainHandler(response),options.done(response)),resolve(response);else{if(401===response.error||403===response.error){var loginUrl=document.getElementById("login_url").value;return location.href="".concat(loginUrl,"?return_to=").concat(location.origin+location.pathname),void reject(response)}if("function"==typeof options.fail){if(!options.noAlert&&response&&response.msg)null==api_list.find((function(item){return options.url.includes(item)}))&&(0,_assets_script_lib_Alert__WEBPACK_IMPORTED_MODULE_3__.b)(response.msg);options.fail(response)}reject(response)}}else if(xhr.responseText){try{response=JSON.parse(xhr.responseText);"function"==typeof options.fail&&options.fail(response)}catch(error){window.manualCaptureException&&window.manualCaptureException("AJAX_PARSE",error)}reject(response)}_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().emit(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().EVENT.HIDE_PROGRESS)},xhr.addEventListener("progress",(function(event){if(event&&event.lengthComputable)event.loaded,event.total}),!1),xhr.onerror=function(error){reject(error),"function"==typeof options.fail&&options.fail(error),window.manualCaptureException&&window.manualCaptureException("AJAX_ERROR",error)},xhr.ontimeout=function(error){reject(error),"function"==typeof options.fail&&options.fail(error),window.manualCaptureException&&window.manualCaptureException("AJAX_TIMEOUT",error)},"GET"===options.method.toUpperCase()?xhr.send():(options.param=_objectSpread2({store:store,cookie:cookieId,region:store,shopCode:store,returnTo:returnToUrl},options.param),xhr.send(JSON.stringify(options.param)),_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().emit(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().EVENT.SHOW_PROGRESS))}))}function uuid(){var urlAlphabet="useandom26T198340PX75pxJACKVERYMINDBUSHWOLFGQZbfghjklqvwyzrict";return(new Date).getTime()+function(){for(var size=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,id="",i=size;i--;)id+=urlAlphabet[62*Math.random()|0];return id}(26)}},4987:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{VN:function(){return getUserID}});var _assets_script_lib_global__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5737),_assets_script_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1964),_assets_script_constant__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(4046),__webpack_require__(58));function getUserID(){var id=(0,_assets_script_helpers__WEBPACK_IMPORTED_MODULE_1__.getStorage)(_assets_script_constant__WEBPACK_IMPORTED_MODULE_3__.STORAGE_KEY.USER_ID);if(null==id){var cookieId=(0,_assets_script_lib_global__WEBPACK_IMPORTED_MODULE_0__.Vj)();return(0,_assets_script_helpers__WEBPACK_IMPORTED_MODULE_1__.setStorage)(_assets_script_constant__WEBPACK_IMPORTED_MODULE_3__.STORAGE_KEY.USER_ID,cookieId),cookieId}return id}},1955:function(__unused_webpack___webpack_module__,__webpack_exports__){"use strict";function assign(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)target[key]=source[key]}return target}var api=function init(converter,defaultAttributes){function set(key,value,attributes){if("undefined"!=typeof document){"number"==typeof(attributes=assign({},defaultAttributes,attributes)).expires&&(attributes.expires=new Date(Date.now()+864e5*attributes.expires)),attributes.expires&&(attributes.expires=attributes.expires.toUTCString()),key=encodeURIComponent(key).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName].split(";")[0]));return document.cookie=key+"="+converter.write(value,key)+stringifiedAttributes}}return Object.create({set:set,get:function(key){if("undefined"!=typeof document&&(!arguments.length||key)){for(var cookies=document.cookie?document.cookie.split("; "):[],jar={},i=0;i<cookies.length;i++){var parts=cookies[i].split("="),value=parts.slice(1).join("=");try{var foundKey=decodeURIComponent(parts[0]);if(jar[foundKey]=converter.read(value,foundKey),key===foundKey)break}catch(e){}}return key?jar[key]:jar}},remove:function(key,attributes){set(key,"",assign({},attributes,{expires:-1}))},withAttributes:function(attributes){return init(this.converter,assign({},this.attributes,attributes))},withConverter:function(converter){return init(assign({},this.converter,converter),this.attributes)}},{attributes:{value:Object.freeze(defaultAttributes)},converter:{value:Object.freeze(converter)}})}({read:function(value){return'"'===value[0]&&(value=value.slice(1,-1)),value.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(value){return encodeURIComponent(value).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});__webpack_exports__.Z=api}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=function(exports,definition){for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},function(){"use strict";var _assets_script_lib_global__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5737),_hooks_bindCookie__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4987),_assets_script_helpers_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1964);function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(Class){if(null===Class||(fn=Class,-1===Function.toString.call(fn).indexOf("[native code]")))return Class;var fn;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Modal=window.Modal,CODE_REG=/^\w{14}$/,verify=function(_HTMLElement){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(verify,_HTMLElement);var Derived,hasNativeReflectConstruct,Constructor,protoProps,staticProps,_super=(Derived=verify,hasNativeReflectConstruct=_isNativeReflectConstruct(),function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)});function verify(){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,verify),(_this=_super.call(this)).form=_this.querySelector("#code-form"),_this.codeInput=_this.querySelector(".code-input"),_this.successDialog=_this.querySelector(".success-dialog"),_this.errorDialog=_this.querySelector(".error-dialog"),_this.googleApi=_this.querySelector(".google_api").value,_this.sweeterScoreWrapper=_this.querySelector(".sweeter-score"),_this.flavourScoreDom=_this.querySelector(".flavour-score .score"),_this.sweeterScoreDom=_this.querySelector(".sweeter-score .score"),_this.flavourStarList=_this.querySelectorAll(".flavour-score .star"),_this.sweeterStarList=_this.querySelectorAll(".sweeter-score .star"),_this.flavourScore=-1,_this.sweeterScore=-1,_this.errorContent=_this.querySelector(".error-content"),_this.productName=_this.querySelector(".product-name"),_this.productType=_this.querySelector(".product-type"),_this.productCode=_this.querySelector(".product-code"),_this.serialNumber=_this.querySelector(".serial-number"),_this.feedbackDom=_this.querySelector(".feedback"),_this.$authenticText=_this.querySelector(".as-authentic-text"),_this.radioGroup1=_this.querySelector(".radio-group-1"),_this.radioGroup2=_this.querySelector(".radio-group-2"),_this.sweeterRadio=Array.from(_this.querySelectorAll('input[name="sweeterScore"]')),_this.flavourRadio=Array.from(_this.querySelectorAll('input[name="flavourScore"]')),_this.verifyIconSuccess=_this.querySelector(".as-verify-icon-success"),_this.verifyIconHightRisk=_this.querySelector(".as-verify-icon-high-risk"),_this.response={},_this.closeSendDoc(),_this.init(),_this.renderStar(),_this.renderRadio(),_this.successDialog.addEventListener("hide.bs.modal",(function(){var _this$sweeterScoreWra;null===(_this$sweeterScoreWra=_this.sweeterScoreWrapper)||void 0===_this$sweeterScoreWra||_this$sweeterScoreWra.classList.add("d-none"),_this.codeInput.value="",_this.form.classList.remove("was-validated"),_this.response.productName&&-1!==_this.flavourScore&&(_this.uploadGoogleDoc(),clearTimeout(_this.timer),_this.resetScore())})),_this.errorDialog.addEventListener("hide.bs.modal",(function(){_this.codeInput.value="",_this.form.classList.remove("was-validated")})),_this}return Constructor=verify,(protoProps=[{key:"resetScore",value:function(){var _this$flavourStarList,_this$sweeterStarList,_this$sweeterRadio,_this$flavourRadio;this.response={},this.flavourScore=-1,this.sweeterScore=-1,null===(_this$flavourStarList=this.flavourStarList)||void 0===_this$flavourStarList||_this$flavourStarList.forEach((function(item){item.classList.remove("half","full")})),null===(_this$sweeterStarList=this.sweeterStarList)||void 0===_this$sweeterStarList||_this$sweeterStarList.forEach((function(item){item.classList.remove("half","full")})),null===(_this$sweeterRadio=this.sweeterRadio)||void 0===_this$sweeterRadio||_this$sweeterRadio.forEach((function(item){item.checked=!1})),null===(_this$flavourRadio=this.flavourRadio)||void 0===_this$flavourRadio||_this$flavourRadio.forEach((function(item){item.checked=!1})),this.flavourScoreDom.innerHTML=0}},{key:"setScore",value:function(){var _this$sweeterScoreWra2,_this$radioGroup;this.triggerActive(),this.flavourScoreDom.innerHTML=2*this.flavourScore,null===(_this$sweeterScoreWra2=this.sweeterScoreWrapper)||void 0===_this$sweeterScoreWra2||_this$sweeterScoreWra2.classList.remove("d-none"),null===(_this$radioGroup=this.radioGroup1)||void 0===_this$radioGroup||_this$radioGroup.classList.remove("d-none")}},{key:"setSweeterScore",value:function(){this.triggerActive(),this.sweeterScoreDom.innerHTML=2*this.sweeterScore}},{key:"renderStar",value:function(){var _this2=this;this.flavourStarList.forEach((function(item,itemIndex){item.children[0].addEventListener("click",(function(){item.classList.contains("half")&&item.classList.contains("active")?(_this2.flavourStarList.forEach((function(item){item.classList.remove("half","full")})),_this2.flavourScore=0,_this2.setScore()):(_this2.flavourStarList.forEach((function(star,index){itemIndex>index&&star.classList.add("full"),itemIndex<=index&&star.classList.remove("full","half"),star.classList.remove("active")})),item.classList.add("half"),item.classList.add("active"),_this2.flavourScore=itemIndex+.5,_this2.setScore())})),item.children[1].addEventListener("click",(function(){item.classList.contains("full")&&item.classList.contains("active")?(_this2.flavourStarList.forEach((function(item){item.classList.remove("half","full")})),_this2.flavourScore=0,_this2.setScore()):(_this2.flavourStarList.forEach((function(star,index){itemIndex>index&&star.classList.add("full"),itemIndex<=index&&star.classList.remove("full","half"),star.classList.remove("active")})),item.classList.add("full"),item.classList.add("active"),_this2.flavourScore=itemIndex+1,_this2.setScore())}))}))}},{key:"renderRadio",value:function(){var _this$sweeterRadio2,_this3=this;null===(_this$sweeterRadio2=this.sweeterRadio)||void 0===_this$sweeterRadio2||_this$sweeterRadio2.forEach((function(item){item.addEventListener("change",(function(){_this3.radioGroup2.classList.remove("d-none")}))}))}},{key:"intervalLoad",value:function(){var _this4=this;this.executeFlag||setTimeout((function(){_this4.executeFlag||_this4.executeGrecaptcha()}),500)}},{key:"init",value:function(){var _this5=this,verifyAgain=this.querySelectorAll(".verify-again"),btnChat=this.querySelector(".btn-chat");this.form.addEventListener("submit",(function(e){e.preventDefault(),_this5.form.checkValidity()?_this5.preExecute():_this5.form.classList.add("was-validated")}));var code=(0,_assets_script_helpers_js__WEBPACK_IMPORTED_MODULE_2__.getSearchParams)().get("c")||(0,_assets_script_helpers_js__WEBPACK_IMPORTED_MODULE_2__.getSearchParams)().get("code");code&&CODE_REG.test(code)?(this.codeInput.value=code,this.executeFlag=!1,this.preExecute()):navigator.clipboard.readText().then((function(clipText){CODE_REG.test(clipText)&&(_this5.codeInput.value=clipText)})).catch((function(err){})),verifyAgain.forEach((function(item){item.addEventListener("click",(function(){_this5.closeDialog(),_this5.codeInput.focus()}))})),btnChat.addEventListener("click",(function(){_this5.openChat()}))}},{key:"preExecute",value:function(){var _this6=this;this.executeGrecaptcha(),window.onSubmit=function(token){_this6.executeFlag=!0,_this6.verifyCode(_this6.form),_this6.resetGrecaptcha()}}},{key:"closeDialog",value:function(){var _this$sweeterScoreWra3;null===(_this$sweeterScoreWra3=this.sweeterScoreWrapper)||void 0===_this$sweeterScoreWra3||_this$sweeterScoreWra3.classList.add("d-none"),this.codeInput.value="",this.form.classList.remove("was-validated"),this.closeSuccessDialog(),this.closeErrorDialog()}},{key:"executeGrecaptcha",value:function(){try{window.grecaptcha&&window.grecaptcha.execute&&window.grecaptcha.execute()}catch(error){}this.intervalLoad()}},{key:"resetGrecaptcha",value:function(){window.grecaptcha&&window.grecaptcha.reset&&window.grecaptcha.reset()}},{key:"openSuccessWarnDialog",value:function(){this.$authenticText&&(this.$authenticText.textContent=this.$authenticText.dataset.highRisk),this.verifyIconSuccess&&this.verifyIconSuccess.classList.add("d-none"),this.verifyIconHightRisk&&this.verifyIconHightRisk.classList.remove("d-none"),this.productCode.innerHTML=this.response.productCode,this.productName.innerHTML=this.response.productName.replace(/-STD|-\d.?mg\/ml|-\d.?mg\/g|-\d.?мг\/см³|-\d\%/gi,""),this.productType.innerHTML=this.response.productType,this.serialNumber.innerHTML=this.response.serialNumber,Modal.getOrCreateInstance(this.successDialog).show(),this.feedbackDom.classList.add("d-none")}},{key:"openSuccessDialog",value:function(){if(this.response&&this.response.queryTimes>=4)return this.openSuccessWarnDialog();this.$authenticText&&(this.$authenticText.textContent=this.$authenticText.dataset.authentic),this.verifyIconSuccess&&this.verifyIconSuccess.classList.remove("d-none"),this.verifyIconHightRisk&&this.verifyIconHightRisk.classList.add("d-none"),this.productCode.innerHTML=this.response.productCode,this.productName.innerHTML=this.response.productName.replace(/-STD|-\d.?mg\/ml|-\d.?mg\/g|-\d.?мг\/см³|-\d\%/gi,""),this.productType.innerHTML=this.response.productType,this.serialNumber.innerHTML=this.response.serialNumber,Modal.getOrCreateInstance(this.successDialog).show(),this.feedbackDom.classList.add("d-none")}},{key:"closeSuccessDialog",value:function(){Modal.getOrCreateInstance(this.successDialog).hide()}},{key:"openErrorDialog",value:function(content){content&&(this.errorContent.innerHTML=content),Modal.getOrCreateInstance(this.errorDialog).show()}},{key:"closeErrorDialog",value:function(){Modal.getOrCreateInstance(this.errorDialog).hide()}},{key:"handleCode",value:function(code){switch(code){case 200:this.openSuccessDialog(),window.ga&&ga("send","event","Engagement","Verify_Authentic");break;case 500:this.openErrorDialog(),window.ga&&ga("send","event","Engagement","Verify_Error","Product_Not_Authentic");break;case 1001:this.openErrorDialog("The result returns an exception. Please try again or contact us"),window.ga&&ga("send","event","Invalid_parameter","click","Engagement");break;case 1002:this.openErrorDialog("The result returns an exception. Please try again or contact us"),window.ga&&ga("send","event","Verify_service_unavailable","click","Engagement");break;case 1003:default:this.openErrorDialog("The result returns an exception. Please try again or contact us"),window.ga&&ga("send","event","Product_Service_Unavailable","click","Engagement");break;case 1004:this.openErrorDialog("This product could be counterfeit because this code has been used many times."),window.ga&&ga("send","event","Frequency_Limit","click","Engagement");break;case 5006:this.openErrorDialog("The result returns an exception. Please try again or contact us"),window.ga&&ga("send","event","Invalid_reCaptcha","click","Engagement")}}},{key:"verifyCode",value:function(form){var _this7=this,param={};param.recaptcha=form["g-recaptcha-response"].value,param.code=form.code.value,param.cookieId=(0,_hooks_bindCookie__WEBPACK_IMPORTED_MODULE_1__.VN)(),param.scanScenes=0,(0,_assets_script_lib_global__WEBPACK_IMPORTED_MODULE_0__.i3)({url:form.action,method:"post",needAuthorization:!0,param:param}).then((function(res){_this7.response=res.data,_this7.handleCode(res.code)})).catch((function(err){_this7.handleCode(err.code)}))}},{key:"closeSendDoc",value:function(){var _this8=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&_this8.response.productName&&-1!==_this8.flavourScore&&(navigator.sendBeacon(_this8.googleApi,_this8.makeFormData()),clearTimeout(_this8.timer),_this8.response={})}))}},{key:"triggerActive",value:function(){var _this9=this;clearTimeout(this.timer),this.timer=setTimeout((function(){_this9.uploadGoogleDoc(),_this9.response={}}),3e4)}},{key:"makeFormData",value:function(){var _this$flavourRadio2,_this$flavourRadio2$f,_this$sweeterRadio3,_this$sweeterRadio3$f,form=new FormData,obj={userId:(0,_hooks_bindCookie__WEBPACK_IMPORTED_MODULE_1__.VN)(),productName:this.response.productName,recommendScore:-1===this.flavourScore?"":this.flavourScore,flavourScore:(null===(_this$flavourRadio2=this.flavourRadio)||void 0===_this$flavourRadio2||null===(_this$flavourRadio2$f=_this$flavourRadio2.find((function(item){return item.checked})))||void 0===_this$flavourRadio2$f?void 0:_this$flavourRadio2$f.value)||"",sweeterScore:(null===(_this$sweeterRadio3=this.sweeterRadio)||void 0===_this$sweeterRadio3||null===(_this$sweeterRadio3$f=_this$sweeterRadio3.find((function(item){return item.checked})))||void 0===_this$sweeterRadio3$f?void 0:_this$sweeterRadio3$f.value)||""};for(var key in obj)form.append(key,obj[key]);return form}},{key:"openChat",value:function(){window.location.href="/pages/contact-us"}},{key:"uploadGoogleDoc",value:function(){var _this10=this;fetch(this.googleApi,{method:"post",body:this.makeFormData()}).then((function(response){response&&(200===response.status||response.ok)&&_this10.feedbackDom.classList.remove("d-none")})).catch((function(err){}))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),verify}(_wrapNativeSuper(HTMLElement));customElements.get("custom-verify")||window.customElements.define("custom-verify",verify)}()}();