/*! For license information please see customer-register-index.min.js.LICENSE.txt */
!function(){var __webpack_modules__={4046:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _document$querySelect;__webpack_require__(5737),__webpack_require__(58),__webpack_require__(4987),null===(_document$querySelect=document.querySelector("#customerEmail"))||void 0===_document$querySelect||_document$querySelect.value},58:function(module){module.exports={STORE_INFO:{defaultStore:{name:"Global",link:"https://www.wakavaping.com/",code:"gl"},storeList:[{name:"United Kingdom",link:"https://uk.wakavaping.com/",code:"gb"},{name:"Canada",link:"https://ca.wakavaping.com/",code:"ca"},{name:"France",link:"https://fr.wakavaping.com/",code:"fr"},{name:"Spain",link:"https://es.wakavaping.com/",code:"es"},{name:"Russia",link:"https://ru.wakavaping.com/",code:"ru"},{name:"Indonesia",link:"https://idn.wakavaping.com/",code:"id"},{name:"Colombia",link:"https://lat.wakavaping.com/",code:"co"},{name:"Italy",link:"https://it.wakavaping.com/",code:"it"},{name:"New Zealand",link:"https://walavape.com/",code:"nz"}]},STORAGE_KEY:{USER_ID:"RELX_USER_ID"},ANALYZE_TYPE:{CAMPAIGN_LAND_PAGE_UV:0,CAMPAIGN_LAND_PAGE_PV:1,NEW_USER:2,JOIN_GAME_UV:3,JOIN_GAME_TIME:4,WHATS_APP:5}}},3063:function(module){module.exports={emit:function(eventName,data,$el){var customEvent;return"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style?(customEvent=document.createEvent("CustomEvent")).initCustomEvent(eventName,!0,!0,data):customEvent=new window.CustomEvent(eventName,{detail:data,bubbles:!0,cancelable:!0}),($el=$el||document).dispatchEvent(customEvent)},EVENT:{SIGN_IN_REQUIRED:"sign-in-required",NO_AGE_RESTRICTION:"above-age",NO_COUNTRY_JUMP:"country-jump",CHOOSE_STORE_MODAL_HIDE:"choose-store-modal-hide",CHOOSE_STORE_MODAL_POPED:"choose-store-modal-poped",SHOW_SIMPLE_MESSAGE:"message.show",ADD_ITEM_TO_CART:"cart.add",ADD_ITEM_TO_CART_FINISH:"cart.add.finish",UPDATE_CART:"cart.update",SHOW_PROGRESS:"progress.show",HIDE_PROGRESS:"progress.hide",VARIANT_CHANGE:"variant-change"}}},1964:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ajax:function(){return ajax},camelHandle:function(){return camelHandle},checkIsMobile:function(){return checkIsMobile},closeSkeleton:function(){return closeSkeleton},getApiVoucher:function(){return getApiVoucher},getHash:function(){return getHash},getParam:function(){return getParam},getParams:function(){return getParams},getQueryArgs:function(){return getQueryArgs},getSearchParams:function(){return getSearchParams},getStorage:function(){return getStorage},hiddenFooter:function(){return hiddenFooter},isLogin:function(){return isLogin},isPc:function(){return isPc},lightUpNav:function(){return lightUpNav},loginVerify:function(){return loginVerify},param:function(){return param},redirectTo:function(){return redirectTo},removeApiVoucher:function(){return removeApiVoucher},removeStorage:function(){return removeStorage},saveApiVoucher:function(){return saveApiVoucher},setStorage:function(){return setStorage},spliceParams:function(){return spliceParams},stopScroll:function(){return stopScroll}});var _assets_script_events_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3063),_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0__),js_cookie__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1955);function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ajax(options){if(options){var $store=document.getElementById("customer-current-store"),$returnToUrl=document.getElementById("customer-return-to-url"),store=$store&&$store.value,returnToUrl=$returnToUrl&&$returnToUrl.value,xhr=new XMLHttpRequest;if(xhr.open(options.method,options.url),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),xhr.setRequestHeader("Accept","application/json, text/javascript, */*"),options.needAuthorization){var voucher=getApiVoucher();voucher&&xhr.setRequestHeader("Authorization","Bearer "+voucher)}xhr.onload=function(){if("function"==typeof options.always&&options.always(),200===xhr.status&&xhr.responseText)(response=JSON.parse(xhr.responseText)).error?403===response.error||response.error&&"function"==typeof options.fail&&options.fail(response):"function"==typeof options.done&&options.done(response);else if(xhr.responseText){var response=JSON.parse(xhr.responseText);"function"==typeof options.fail&&options.fail(response)}_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().emit(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().EVENT.HIDE_PROGRESS)},xhr.addEventListener("progress",(function(event){if(event.lengthComputable)event.loaded,event.total}),!1),"GET"===options.method.toUpperCase()?xhr.send():options.param.indexOf("return_to=")>-1?xhr.send(decodeURI("store="+store+"&"+options.param)):xhr.send(decodeURI("store="+store+"&return_to="+returnToUrl+"&"+options.param)),_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().emit(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().EVENT.SHOW_PROGRESS)}}function param(a){var s=[],add=function(k,v){v=null==(v="function"==typeof v?v():v)?"":v,s[s.length]=encodeURIComponent(k)+"="+encodeURIComponent(v)};return function buildParams(prefix,obj){var i,len,key;if(prefix)if(Array.isArray(obj))for(i=0,len=obj.length;i<len;i++)buildParams(prefix+"["+("object"===_typeof(obj[i])&&obj[i]?i:"")+"]",obj[i]);else if("[object Object]"===String(obj))for(key in obj)buildParams(prefix+"["+key+"]",obj[key]);else add(prefix,obj);else if(Array.isArray(obj))for(i=0,len=obj.length;i<len;i++)add(obj[i].name,obj[i].value);else for(key in obj)buildParams(key,obj[key]);return s}("",a).join("&")}function checkIsMobile(){var $flag=document.querySelector("#as-is-mobile-flag");return!!$flag&&"none"!==window.getComputedStyle($flag).display}function saveApiVoucher(token,data){js_cookie__WEBPACK_IMPORTED_MODULE_1__.Z.set("relx-voucher",token),data&&data.userId&&window.saveEcUserId&&setStorage("EC_USER_ID",data.userId),window.Shopify&&window.Shopify.designMode&&setStorage("relx-voucher-design-mode",token)}function getApiVoucher(){var token=js_cookie__WEBPACK_IMPORTED_MODULE_1__.Z.get("relx-voucher");if(token)return token;var args=getQueryArgs();return args.token?args.token:window.Shopify&&window.Shopify.designMode?getStorage("relx-voucher-design-mode"):void 0}function removeApiVoucher(){js_cookie__WEBPACK_IMPORTED_MODULE_1__.Z.remove("relx-voucher"),removeStorage("EC_USER_ID"),window.Shopify&&window.Shopify.designMode&&removeStorage("relx-voucher-design-mode")}function getParams(param){return(encodeUrl=new URL(window.self.location.href.replace("#edit-profile",encodeURIComponent("#edit-profile"))),new URLSearchParams(encodeUrl.search)).get(param);var encodeUrl}function getHash(){return window.location.hash}function getQueryArgs(link){var url=link||location.href,firstQMindex=(url=decodeURIComponent(url)).indexOf("?");if(-1===firstQMindex)return{};var residue=url.substr(firstQMindex+1),hashIndex=residue.indexOf("#");hashIndex>-1&&(residue=residue.substr(0,hashIndex));var secondQMindex=residue.indexOf("?"),search={};if(-1===secondQMindex)for(var pairs=residue.split("&"),i=0;i<pairs.length;i++)search[(pieces=pairs[i].split("="))[0]]=pieces[1];else{var pieces,suffix=residue.substr(secondQMindex);for(pairs=residue.substr(0,secondQMindex).split("&"),i=0;i<pairs.length;i++)pieces=pairs[i].split("="),i===pairs.length-1?search[pieces[0]]=pieces[1]+suffix:search[pieces[0]]=pieces[1]}return search}function getSearchParams(){var search=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return search&&"[object String]"==Object.prototype.toString.call(search)?null:new URLSearchParams(window.self.location.search)}function redirectTo($multipass){var url=spliceParams($multipass);window.location.href=url}function spliceParams($multipass){var redirect_to=getParams("redirect_to"),change=getParams("change");if(redirect_to&&change)if($source&&callback&&isAllowed(callback)){var redirectUrl=redirect_to+"?source="+$source+"&callback="+callback+"&change="+change;if(return_to&&isAllowed(return_to))redirectUrl=redirect_to+"?source="+$source+"&callback="+callback+"&change="+change+"&return_to"+return_to}else redirectUrl=redirect_to;else if($multipass)redirectUrl=document.querySelector("._as-callback").value+"/multipass/"+$multipass;else redirectUrl=document.querySelector("._as-return-to").value;return redirectUrl}function isPc(){var $pcFlag=document.querySelector(".as-pc-flag");if($pcFlag)return"none"===window.getComputedStyle($pcFlag).display}function getParam(param,url){var currentUrl;return currentUrl=url?new URL(url):new URL(window.location.href),new URLSearchParams(currentUrl.search).get(param)}function stopScroll(){var flag=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];flag?(document.body.classList.add("modal-open"),document.documentElement.classList.add("modal-open")):(document.body.classList.remove("modal-open"),document.documentElement.classList.remove("modal-open"))}function camelHandle(name){var listWord=name.toLowerCase().split("-");return listWord.slice(1).reduce((function(cur,next){return cur+next[0].toUpperCase()+next.slice(1)}),listWord[0])}function loginVerify(){var flag=arguments.length>0&&void 0!==arguments[0]&&arguments[0],$login=document.getElementById("customer-logged-in");if($login&&$login.value)return!0;if(!flag){var _document$getElementB,loginUrl=null===(_document$getElementB=document.getElementById("login_url"))||void 0===_document$getElementB?void 0:_document$getElementB.value;location.href="".concat(loginUrl,"?return_to=").concat(location.origin+location.pathname)}return!1}function isLogin(){var $login=document.getElementById("customer-logged-in");return!(!$login||!$login.value)}function getStorage(key){try{var value=localStorage.getItem(key);return null==value?null:JSON.parse(value)}catch(error){return window.manualCaptureException&&window.manualCaptureException("LOCAL_STORAGE_ERROR",{type:"get",key:key,error:error}),null}}function setStorage(key,value){if(null!=value)try{value=JSON.stringify(value),localStorage.setItem(key,value)}catch(error){return window.manualCaptureException&&window.manualCaptureException("LOCAL_STORAGE_ERROR",{type:"set",key:key,value:value,error:error}),null}}function removeStorage(key){try{localStorage.removeItem(key)}catch(error){return window.manualCaptureException&&window.manualCaptureException("LOCAL_STORAGE_ERROR",{type:"remove",key:key,error:error}),null}}function closeSkeleton(){var time=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise((function(resolve){setTimeout((function(){var $skeleton=document.getElementById("skeleton");$skeleton&&$skeleton.remove(),resolve(null)}),time)}))}function lightUpNav(index){var $parents=document.querySelector(".as-site-header ul.nav");if($parents){var $target=$parents.children[index];if($target){var $span=$target.querySelector("span");if($span)$span.textContent.trim().includes("Autoship")&&$span.classList.add("nav-lightup")}}}function hiddenFooter(){var $footer=document.querySelector(".site-footer .as-footer-top");$footer&&$footer.classList.add("d-none")}},2095:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{b:function(){return Alert}});function getHtml(content){return'\n        <i class="el-message__icon el-icon-info">\n          <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>\n        </i>\n        <p class="el-message__content">'.concat(content,"</p>\n    ")}function injectStyles(){var StyleTag=document.createElement("STYLE");StyleTag.innerHTML="\n    .el-message {\n        min-width: 380px;\n        box-sizing: border-box;\n        border-radius: 4px;\n        border: 1px solid #ebeef5;\n        position: fixed;\n        left: 50%;\n        top: 20px;\n        transform: translateX(-50%);\n        // background-color: #edf2fc;\n        background: #f0c756;\n        transition: opacity .3s,transform .4s,top .4s;\n        overflow: hidden;\n        padding: 15px 15px 15px 20px;\n        display: flex;\n        align-items: center;\n        z-index: 2040;\n    }\n    .el-message .el-icon-info {\n        color: #fff;\n    }\n    .el-message__icon {\n        margin-right: 10px;\n    }\n    .el-message--info .el-message__content {\n        color: #fff;\n    }\n    .el-message p {\n        margin: 0;\n    }\n    .el-message__content {\n        padding: 0;\n        font-size: 14px;\n        line-height: 1;\n    }\n    @media (max-width: 575.98px) {\n        .el-message{\n            min-width: auto;\n            width:70%;\n            word-break: break-word;\n        }\n    }\n",document.head.appendChild(StyleTag)}var Alert=function(msg){var time=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;injectStyles();var html=getHtml(msg),DIV=document.createElement("DIV");DIV.innerHTML=html,DIV.setAttribute("class","el-message el-message--info as-relx-alert");var len=document.querySelectorAll(".as-relx-alert").length,top=56*len+20+10*len;DIV.style.top=top+"px",document.body.appendChild(DIV),setTimeout((function(){DIV&&DIV.remove()}),time)}},5737:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Vj:function(){return uuid},i3:function(){return relx_ajax}});var _assets_script_events_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3063),_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0__),_assets_script_helpers_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1964),_assets_script_lib_Alert__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2095),_hooks_bindCookie__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4987);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty2(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty2(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function domainHandler(response){if(response&&response.data&&response.data.multiPassUrl&&Shopify&&Shopify.designMode){var origin=location.origin+"/";response.data.multiPassUrl=response.data.multiPassUrl.replace(/((http)|(https):\/\/[^\/]+)\//,origin)}}var api_list=["/user/queryUserInfo"];function relx_ajax(options){return new Promise((function(resolve,reject){options||reject();var $store=document.getElementById("customer-current-store"),$returnToUrl=document.getElementById("customer-return-to-url"),store=$store&&$store.value,returnToUrl=$returnToUrl&&$returnToUrl.value,cookieId=(0,_hooks_bindCookie__WEBPACK_IMPORTED_MODULE_2__.VN)();if(location.search&&location.search.includes("return_to=")){var search=location.search;search.startsWith("?")&&(search=search.slice(1));var target=search.split("&").find((function(item){return item.includes("return_to=")}));target&&(returnToUrl=target.split("=")[1])&&"string"==typeof returnToUrl&&(returnToUrl=decodeURIComponent(returnToUrl))}var xhr=new XMLHttpRequest;if(xhr.withCredentials=options.withCredentials||!1,"GET"===options.method&&(options.url.includes("?")?options.url="".concat(options.url,"&region=").concat(store,"&cookie=").concat(cookieId):options.url="".concat(options.url,"?region=").concat(store,"&cookie=").concat(cookieId)),xhr.open(options.method,options.url),xhr.setRequestHeader("Content-Type","application/json"),xhr.setRequestHeader("Accept","application/json, text/javascript, */*"),options.needAuthorization){var voucher=(0,_assets_script_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getApiVoucher)();voucher&&xhr.setRequestHeader("Authorization",voucher)}window.Shopify&&!window.Shopify.designMode&&(xhr.timeout=options.timeout||6e4),xhr.onload=function(){if("function"==typeof options.always&&options.always(),200===xhr.status&&xhr.responseText){var response=JSON.parse(xhr.responseText);if(options.noParse)return options.done(response),void resolve(response);if(200===response.code)"function"==typeof options.done&&(domainHandler(response),options.done(response)),resolve(response);else{if(401===response.error||403===response.error){var loginUrl=document.getElementById("login_url").value;return location.href="".concat(loginUrl,"?return_to=").concat(location.origin+location.pathname),void reject(response)}if("function"==typeof options.fail){if(!options.noAlert&&response&&response.msg)null==api_list.find((function(item){return options.url.includes(item)}))&&(0,_assets_script_lib_Alert__WEBPACK_IMPORTED_MODULE_3__.b)(response.msg);options.fail(response)}reject(response)}}else if(xhr.responseText){try{response=JSON.parse(xhr.responseText);"function"==typeof options.fail&&options.fail(response)}catch(error){window.manualCaptureException&&window.manualCaptureException("AJAX_PARSE",error)}reject(response)}_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().emit(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().EVENT.HIDE_PROGRESS)},xhr.addEventListener("progress",(function(event){if(event&&event.lengthComputable)event.loaded,event.total}),!1),xhr.onerror=function(error){reject(error),"function"==typeof options.fail&&options.fail(error),window.manualCaptureException&&window.manualCaptureException("AJAX_ERROR",error)},xhr.ontimeout=function(error){reject(error),"function"==typeof options.fail&&options.fail(error),window.manualCaptureException&&window.manualCaptureException("AJAX_TIMEOUT",error)},"GET"===options.method.toUpperCase()?xhr.send():(options.param=_objectSpread2({store:store,cookie:cookieId,region:store,shopCode:store,returnTo:returnToUrl},options.param),xhr.send(JSON.stringify(options.param)),_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().emit(_assets_script_events_js__WEBPACK_IMPORTED_MODULE_0___default().EVENT.SHOW_PROGRESS))}))}function uuid(){var urlAlphabet="useandom26T198340PX75pxJACKVERYMINDBUSHWOLFGQZbfghjklqvwyzrict";return(new Date).getTime()+function(){for(var size=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,id="",i=size;i--;)id+=urlAlphabet[62*Math.random()|0];return id}(26)}},7781:function(module){module.exports=function(form){if(form&&"FORM"===form.nodeName){var i,j,q={};for(i=form.elements.length-1;i>=0;i-=1)if(""!==form.elements[i].name)switch(form.elements[i].nodeName){case"INPUT":switch(form.elements[i].type){case"text":case"email":case"hidden":case"password":case"button":case"reset":case"submit":case"number":q[form.elements[i].name]=form.elements[i].value;break;case"checkbox":case"radio":form.elements[i].checked&&(q[form.elements[i].name]=form.elements[i].value)}break;case"TEXTAREA":q[form.elements[i].name]=form.elements[i].value;break;case"SELECT":switch(form.elements[i].type){case"select-one":q[form.elements[i].name]=form.elements[i].value;break;case"select-multiple":for(j=form.elements[i].options.length-1;j>=0;j-=1)form.elements[i].options[j].selected&&(q[form.elements[i].name]=form.elements[i].options[j].value)}break;case"BUTTON":switch(form.elements[i].type){case"reset":case"submit":case"button":q[form.elements[i].name]=form.elements[i].value}}return q}}},5443:function(module){module.exports=function(form){if(form&&"FORM"===form.nodeName){var i,j,q=[];for(i=form.elements.length-1;i>=0;i-=1)if(""!==form.elements[i].name)switch(form.elements[i].nodeName){case"INPUT":switch(form.elements[i].type){case"text":case"email":case"hidden":case"password":case"button":case"reset":case"submit":case"number":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"checkbox":case"radio":form.elements[i].checked&&q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value))}break;case"TEXTAREA":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"SELECT":switch(form.elements[i].type){case"select-one":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"select-multiple":for(j=form.elements[i].options.length-1;j>=0;j-=1)form.elements[i].options[j].selected&&q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].options[j].value))}break;case"BUTTON":switch(form.elements[i].type){case"reset":case"submit":case"button":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value))}}return q.join("&")}}},4987:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{VN:function(){return getUserID}});var _assets_script_lib_global__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5737),_assets_script_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1964),_assets_script_constant__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(4046),__webpack_require__(58));function getUserID(){var id=(0,_assets_script_helpers__WEBPACK_IMPORTED_MODULE_1__.getStorage)(_assets_script_constant__WEBPACK_IMPORTED_MODULE_3__.STORAGE_KEY.USER_ID);if(null==id){var cookieId=(0,_assets_script_lib_global__WEBPACK_IMPORTED_MODULE_0__.Vj)();return(0,_assets_script_helpers__WEBPACK_IMPORTED_MODULE_1__.setStorage)(_assets_script_constant__WEBPACK_IMPORTED_MODULE_3__.STORAGE_KEY.USER_ID,cookieId),cookieId}return id}},1955:function(__unused_webpack___webpack_module__,__webpack_exports__){"use strict";function assign(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)target[key]=source[key]}return target}var api=function init(converter,defaultAttributes){function set(key,value,attributes){if("undefined"!=typeof document){"number"==typeof(attributes=assign({},defaultAttributes,attributes)).expires&&(attributes.expires=new Date(Date.now()+864e5*attributes.expires)),attributes.expires&&(attributes.expires=attributes.expires.toUTCString()),key=encodeURIComponent(key).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName].split(";")[0]));return document.cookie=key+"="+converter.write(value,key)+stringifiedAttributes}}return Object.create({set:set,get:function(key){if("undefined"!=typeof document&&(!arguments.length||key)){for(var cookies=document.cookie?document.cookie.split("; "):[],jar={},i=0;i<cookies.length;i++){var parts=cookies[i].split("="),value=parts.slice(1).join("=");try{var foundKey=decodeURIComponent(parts[0]);if(jar[foundKey]=converter.read(value,foundKey),key===foundKey)break}catch(e){}}return key?jar[key]:jar}},remove:function(key,attributes){set(key,"",assign({},attributes,{expires:-1}))},withAttributes:function(attributes){return init(this.converter,assign({},this.attributes,attributes))},withConverter:function(converter){return init(assign({},this.converter,converter),this.attributes)}},{attributes:{value:Object.freeze(defaultAttributes)},converter:{value:Object.freeze(converter)}})}({read:function(value){return'"'===value[0]&&(value=value.slice(1,-1)),value.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(value){return encodeURIComponent(value).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});__webpack_exports__.Z=api}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=function(exports,definition){for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},function(){"use strict";var serialize=__webpack_require__(5443),serialize_default=__webpack_require__.n(serialize),serialize2Json=__webpack_require__(7781),serialize2Json_default=__webpack_require__.n(serialize2Json),global=__webpack_require__(5737),helpers=__webpack_require__(1964);function handlerOfflineLoginData(payload){var $store=document.getElementById("customer-current-store"),utm_source=window.sessionStorage.getItem("utm_source"),product_type=window.sessionStorage.getItem("product_type");$store&&(utm_source&&("POSM"===utm_source||["eg"].includes($store.value)&&["RStablecard","OTstore_Wobbler","shoppingbag","RSleaflet"].includes(utm_source))&&(payload.accountSource=2),product_type&&(payload.productType=product_type))}function Form($form,options){$form&&(this.$form=$form,this.options=options||{},this.$submit=this.$form.querySelector(".as-submit"),this.$error=this.$form.querySelector(".as-form-error"),this.$tips=this.$form.querySelector(".as-form-tips"),this.white_list=["user/auth/pwd/reset","user/login","user/register","user/auth/pwd/forget"],this.init())}Form.prototype={constructor:Form,init:function(){var _this=this,that=this;"function"==typeof this.options.init&&this.options.init.call(this),this.$form.onsubmit=function(event){if((event=event||window.event).preventDefault(),event.stopPropagation(),!_this.validate())return!1;if("function"==typeof _this.options.validate&&!_this.options.validate.call(_this))return!1;_this.freeze();var method=_this.$form.method.toUpperCase(),params={method:method,url:that.$form.action,needAuthorization:that.options.needAuthorization||!1,done:function(response){"function"==typeof that.options.done&&that.options.done.call(that,response)},fail:function(response){"function"==typeof that.options.fail&&that.options.fail.call(that,response)}};return _this.white_list.some((function(url){return _this.$form.action.includes(url)}))?(params.param=serialize2Json_default()(_this.$form),_this.$form.action.includes("user/register")&&(handlerOfflineLoginData(params.param,!0),params.param.subscribeStatus="on"===params.param.subscribeStatus?1:0),(0,global.i3)(params),!1):(params.param=serialize_default()(_this.$form),params.url="GET"===method?_this.$form.action+"?"+params.param:_this.$form.action,(0,helpers.ajax)(params),!1)},this.$form.addEventListener("input",(function(){_this.clearErrorMessage()}))},fields:function(){for(var $inputs=this.$form.querySelectorAll(".as-form-item"),fields={},i=0;i<$inputs.length;i++){var $input=$inputs[i].querySelector(".form-control");if($input&&$input.name){var $tips=$inputs[i].querySelector(".as-field-tips"),$error=$inputs[i].querySelector(".as-field-error");fields[$input.name]={regx:$input.dataset&&new RegExp($input.dataset.regx),$node:$input,required:!!$input.required,value:$input.value,$tips:$tips,$error:$error}}}return fields},validate:function(){var valid=!0,fields=this.fields();for(var key in fields){var field=fields[key];(field.required&&!field.value||field.regx&&!field.regx.test(field.value))&&(field.$node.classList.add("is-invalid"),field.$error&&field.$error.classList.remove("d-none"),valid=!1)}return valid},freeze:function(){var that=this,fields=this.fields();for(var key in fields)fields[key].$node.disabled=!0;this.$submit.disabled=!0,setTimeout((function(){that.unfreeze()}),3e3)},unfreeze:function(){var fields=this.fields();for(var key in fields)fields[key].$node.disabled=!1;this.$submit.disabled=!1},showFormError:function(message){this.$error&&message&&(this.$error.textContent=message),this.$error&&this.$error.classList.remove("d-none")},clearErrorMessage:function(){this.$error&&this.$error.classList.add("d-none");var fields=this.fields();for(var key in fields){var field=fields[key];field.$error&&field.$error.classList.add("d-none"),field.$node.classList.remove("is-invalid")}},showFormTips:function(message){this.$tips&&message&&(this.$tips.textContent=message),this.$tips&&this.$tips.classList.remove("d-none")},submit:function(){this.$submit&&this.$submit.dispatchEvent(new window.MouseEvent("click"))}};var lib_form=Form,saveApiVoucher=(__webpack_require__(4987),__webpack_require__(1964).saveApiVoucher);function RecoverPsw(){this.$root=document,this.$signupForm=this.$root&&this.$root.querySelector(".as-signup-form"),this.$signupFormErrorDom=this.$signupForm&&this.$signupForm.querySelector(".as-form-error"),this.init()}RecoverPsw.prototype={init:function(){this.processSignup(),this.initSignupPrivacy()},processSignup:function(){var that=this,$form=this.$signupForm,tips="";$form&&new lib_form($form,{done:function(response){response.data&&that.processSubscribe((function(){if(response.data.token&&saveApiVoucher(response.data.token),response.data.userId&&!response.data.token){var closeBtn=document.querySelector(".confirm-close-btn");document.querySelector("#confirmModal").style.display="block",closeBtn.addEventListener("click",(function(){location.href="/account/login"}))}response.data.multiPassUrl&&(that.$signupForm.classList.add("pointer-none"),location.replace(response.data.multiPassUrl))}))},fail:function(response){if(that.$signupFormErrorDom){var dataset=that.$signupFormErrorDom.dataset&&that.$signupFormErrorDom.dataset;5002==response.code?(tips=dataset&&dataset.errorExisted||"",that.$signupFormErrorDom.innerHTML=tips,that.$signupFormErrorDom.classList.remove("d-none")):6003==response.code?(tips=dataset&&dataset.errorVerifyFailed||"",that.$signupFormErrorDom.innerHTML=tips,that.$signupFormErrorDom.classList.remove("d-none")):(tips=dataset&&dataset.errorNormal||"",that.$signupFormErrorDom.innerHTML=tips,that.$signupFormErrorDom.classList.remove("d-none"))}}})},processSubscribe:function(callback){var $subscribe=this.$signupForm&&this.$signupForm.querySelector("#as-signup-page-subscribe"),$email=this.$signupForm&&this.$signupForm.querySelector(".as-email"),email=$email&&$email.value,url=$subscribe&&$subscribe.dataset&&$subscribe.dataset.apiUrl,tag=$subscribe&&$subscribe.dataset&&$subscribe.dataset.apiTag,method=$subscribe&&$subscribe.dataset&&$subscribe.dataset.apiMethod;if(url&&email)if($subscribe&&$subscribe.checked){var data={email:email,type:tag};(0,global.i3)({url:url,method:method,param:data,done:function(){callback&&callback()},fail:function(){callback&&callback()}})}else callback&&callback();else callback&&callback()},initSignupPrivacy:function(){for(var $triggers=this.$signupForm&&this.$signupForm.querySelectorAll(".as-market-info-trigger"),$content=this.$signupForm&&this.$signupForm.querySelector(".as-market-info"),i=0,len=$triggers.length;i<len;i++)$triggers[i].addEventListener("click",(function(event){$content&&($content.classList.contains("d-none")?$content.classList.remove("d-none"):$content.classList.add("d-none")),event.stopPropagation()}));var $button=this.$signupForm&&this.$signupForm.querySelector(".as-submit"),$privacy=this.$signupForm&&this.$signupForm.querySelector("#as-signup-page-privacy");$privacy&&$privacy.addEventListener("change",(function(){this.checked?$button&&($button.disabled=!1):$button&&($button.disabled=!0)}))}},new RecoverPsw}()}();